const utils = require('./utils');

class Gateway {
    constructor ({sid, ip, port, token, password, iv}) {
        this.sid = sid;
        this.ip = ip;
        this.port = port;
        this.token = token;
        this.password = password;
        this.iv = iv;
        this.proto_version = '0.0.0';
        this.model = 'model';
        this.childDevices = [];

        if (!sid) {
            throw new Error('[Gateway:constructor] Param error');
        }
    }

    update (data) {
        for (let key in data) {
            if (this.hasOwnProperty(key)) {
                this[key] = data[key];
            }

            if (data[key] == 'iam') {
                this[key] = data[key]
            }
        }

        for (let sid in data.data) {
            this.childDevices[sid] = data.data[sid];
        }
    }
}

module.exports = Gateway;